var HOST="http://localhost:8080";$(function(){$.ajaxSetup({contentType:"application/json"});var e=new Vue({el:"#navbarToggler",data:{loggedIn:!1,user:{},items:[{name:"Home",url:"index.html",active:!1,annoymous:!0,login:!0},{name:"My Diary",url:"mydiary.html",active:!1,annoymous:!1,login:!0},{name:"New Diary",url:"newdiary.html",active:!1,annoymous:!1,login:!0},{name:"Register",url:"register.html",active:!1,annoymous:!0,login:!1},{name:"Login",url:"login.html",active:!1,annoymous:!0,login:!1}]},methods:{menu:function(e){for(var t=[],n=location.pathname,o=0,a=e.length;o<a;o++){var s=e[o];this.loggedIn&&s.login?t.push(s):!this.loggedIn&&s.annoymous&&t.push(s),s.active=n=="/"+s.url}return t},logout:function(){var e=sessionStorage.getItem("token");$.post(HOST+"/users/expire",JSON.stringify({token:e}),function(e){e.status&&sessionStorage.setItem("message","You have logged out!"),location.href="index.html"})}}}),t=new Vue({el:"#greeting",data:{loggedIn:!1,user:{}}}),n=sessionStorage.getItem("token");n&&$.post(HOST+"/users",JSON.stringify({token:n}),function(n){n.status?(e.loggedIn=!0,e.user=n,t.loggedIn=!0,t.user=n):sessionStorage.removeItem("token")});var o=new Vue({el:"#health-check",data:{status:!0}});$.getJSON(HOST+"/meta/heartbeat",function(e){o.status=!!e.status});var a=new Vue({el:"#maintainers",data:{people:[]}});$.getJSON(HOST+"/meta/members",function(e){e.status&&(a.people=e.result)})});